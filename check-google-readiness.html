<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google 检索准备检查工具</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .check-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ccc;
        }
        .check-item.pass {
            background: #f0f9f0;
            border-left-color: #28a745;
        }
        .check-item.fail {
            background: #fdf2f2;
            border-left-color: #dc3545;
        }
        .check-item.warning {
            background: #fff8e1;
            border-left-color: #ffc107;
        }
        .status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .pass .status { background: #28a745; }
        .fail .status { background: #dc3545; }
        .warning .status { background: #ffc107; color: #000; }
        .actions {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        #results {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>🔍 Google 检索准备检查工具</h1>
        <p>检查您的网站是否已准备好被 Google 索引</p>
        <button onclick="runChecks()" class="btn">开始检查</button>
    </div>

    <div id="results"></div>

    <div class="actions">
        <h3>📋 下一步行动</h3>
        <a href="https://search.google.com/search-console/" target="_blank" class="btn">
            打开 Google Search Console
        </a>
        <a href="https://analytics.google.com/" target="_blank" class="btn">
            设置 Google Analytics
        </a>
        <a href="https://developers.google.com/speed/pagespeed/insights/" target="_blank" class="btn">
            检查页面速度
        </a>
    </div>

    <script>
        async function runChecks() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>正在检查...</p>';
            
            const checks = [
                {
                    name: 'HTTPS 安全连接',
                    check: () => location.protocol === 'https:',
                    description: 'Google 优先索引 HTTPS 网站'
                },
                {
                    name: 'robots.txt 文件',
                    check: async () => {
                        try {
                            const response = await fetch('/robots.txt');
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    description: '告诉搜索引擎如何爬取网站'
                },
                {
                    name: 'sitemap.xml 文件',
                    check: async () => {
                        try {
                            const response = await fetch('/sitemap.xml');
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    description: '帮助 Google 发现所有页面'
                },
                {
                    name: 'Meta 描述标签',
                    check: () => {
                        const metaDesc = document.querySelector('meta[name="description"]');
                        return metaDesc && metaDesc.content.length > 50;
                    },
                    description: '页面描述有助于搜索结果展示'
                },
                {
                    name: 'Open Graph 标签',
                    check: () => {
                        const ogTitle = document.querySelector('meta[property="og:title"]');
                        const ogDesc = document.querySelector('meta[property="og:description"]');
                        return ogTitle && ogDesc;
                    },
                    description: '优化社交媒体分享效果'
                },
                {
                    name: '结构化数据',
                    check: () => {
                        const jsonLd = document.querySelector('script[type="application/ld+json"]');
                        return jsonLd && jsonLd.textContent.includes('schema.org');
                    },
                    description: '帮助 Google 理解页面内容'
                },
                {
                    name: '移动端友好',
                    check: () => {
                        const viewport = document.querySelector('meta[name="viewport"]');
                        return viewport && viewport.content.includes('width=device-width');
                    },
                    description: 'Google 移动优先索引'
                },
                {
                    name: '页面标题唯一性',
                    check: () => {
                        const title = document.title;
                        return title && title.length > 10 && title.length < 60;
                    },
                    description: '每个页面应有独特且合适长度的标题'
                }
            ];

            let passCount = 0;
            let totalCount = checks.length;
            let resultsHTML = '<h2>检查结果</h2>';

            for (const checkItem of checks) {
                let passed = false;
                try {
                    passed = await checkItem.check();
                } catch (error) {
                    console.error('Check failed:', error);
                }
                
                if (passed) passCount++;
                
                const status = passed ? 'pass' : 'fail';
                const icon = passed ? '✓' : '✗';
                
                resultsHTML += `
                    <div class="check-item ${status}">
                        <div class="status">${icon}</div>
                        <div>
                            <strong>${checkItem.name}</strong><br>
                            <small>${checkItem.description}</small>
                        </div>
                    </div>
                `;
            }

            const score = Math.round((passCount / totalCount) * 100);
            let scoreClass = 'warning';
            if (score >= 80) scoreClass = 'pass';
            else if (score < 50) scoreClass = 'fail';

            resultsHTML = `
                <div class="check-item ${scoreClass}">
                    <div class="status">${score}%</div>
                    <div>
                        <strong>总体评分：${score}%</strong><br>
                        <small>通过了 ${passCount}/${totalCount} 项检查</small>
                    </div>
                </div>
            ` + resultsHTML;

            if (score >= 80) {
                resultsHTML += `
                    <div class="check-item pass">
                        <div class="status">🎉</div>
                        <div>
                            <strong>恭喜！您的网站已准备好被 Google 索引</strong><br>
                            <small>可以开始提交到 Google Search Console 了</small>
                        </div>
                    </div>
                `;
            } else {
                resultsHTML += `
                    <div class="check-item warning">
                        <div class="status">⚠️</div>
                        <div>
                            <strong>需要一些改进才能更好地被 Google 索引</strong><br>
                            <small>请修复失败的检查项目</small>
                        </div>
                    </div>
                `;
            }

            results.innerHTML = resultsHTML;
        }

        // 页面加载时自动运行检查
        window.addEventListener('load', () => {
            setTimeout(runChecks, 1000);
        });
    </script>
</body>
</html> 