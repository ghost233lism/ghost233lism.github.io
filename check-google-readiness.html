<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google æ£€ç´¢å‡†å¤‡æ£€æŸ¥å·¥å…·</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .check-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #ccc;
        }
        .check-item.pass {
            background: #f0f9f0;
            border-left-color: #28a745;
        }
        .check-item.fail {
            background: #fdf2f2;
            border-left-color: #dc3545;
        }
        .check-item.warning {
            background: #fff8e1;
            border-left-color: #ffc107;
        }
        .status {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        .pass .status { background: #28a745; }
        .fail .status { background: #dc3545; }
        .warning .status { background: #ffc107; color: #000; }
        .actions {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .btn {
            display: inline-block;
            padding: 10px 20px;
            background: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        #results {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ” Google æ£€ç´¢å‡†å¤‡æ£€æŸ¥å·¥å…·</h1>
        <p>æ£€æŸ¥æ‚¨çš„ç½‘ç«™æ˜¯å¦å·²å‡†å¤‡å¥½è¢« Google ç´¢å¼•</p>
        <button onclick="runChecks()" class="btn">å¼€å§‹æ£€æŸ¥</button>
    </div>

    <div id="results"></div>

    <div class="actions">
        <h3>ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨</h3>
        <a href="https://search.google.com/search-console/" target="_blank" class="btn">
            æ‰“å¼€ Google Search Console
        </a>
        <a href="https://analytics.google.com/" target="_blank" class="btn">
            è®¾ç½® Google Analytics
        </a>
        <a href="https://developers.google.com/speed/pagespeed/insights/" target="_blank" class="btn">
            æ£€æŸ¥é¡µé¢é€Ÿåº¦
        </a>
    </div>

    <script>
        async function runChecks() {
            const results = document.getElementById('results');
            results.innerHTML = '<p>æ­£åœ¨æ£€æŸ¥...</p>';
            
            const checks = [
                {
                    name: 'HTTPS å®‰å…¨è¿æ¥',
                    check: () => location.protocol === 'https:',
                    description: 'Google ä¼˜å…ˆç´¢å¼• HTTPS ç½‘ç«™'
                },
                {
                    name: 'robots.txt æ–‡ä»¶',
                    check: async () => {
                        try {
                            const response = await fetch('/robots.txt');
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    description: 'å‘Šè¯‰æœç´¢å¼•æ“å¦‚ä½•çˆ¬å–ç½‘ç«™'
                },
                {
                    name: 'sitemap.xml æ–‡ä»¶',
                    check: async () => {
                        try {
                            const response = await fetch('/sitemap.xml');
                            return response.ok;
                        } catch {
                            return false;
                        }
                    },
                    description: 'å¸®åŠ© Google å‘ç°æ‰€æœ‰é¡µé¢'
                },
                {
                    name: 'Meta æè¿°æ ‡ç­¾',
                    check: () => {
                        const metaDesc = document.querySelector('meta[name="description"]');
                        return metaDesc && metaDesc.content.length > 50;
                    },
                    description: 'é¡µé¢æè¿°æœ‰åŠ©äºæœç´¢ç»“æœå±•ç¤º'
                },
                {
                    name: 'Open Graph æ ‡ç­¾',
                    check: () => {
                        const ogTitle = document.querySelector('meta[property="og:title"]');
                        const ogDesc = document.querySelector('meta[property="og:description"]');
                        return ogTitle && ogDesc;
                    },
                    description: 'ä¼˜åŒ–ç¤¾äº¤åª’ä½“åˆ†äº«æ•ˆæœ'
                },
                {
                    name: 'ç»“æ„åŒ–æ•°æ®',
                    check: () => {
                        const jsonLd = document.querySelector('script[type="application/ld+json"]');
                        return jsonLd && jsonLd.textContent.includes('schema.org');
                    },
                    description: 'å¸®åŠ© Google ç†è§£é¡µé¢å†…å®¹'
                },
                {
                    name: 'ç§»åŠ¨ç«¯å‹å¥½',
                    check: () => {
                        const viewport = document.querySelector('meta[name="viewport"]');
                        return viewport && viewport.content.includes('width=device-width');
                    },
                    description: 'Google ç§»åŠ¨ä¼˜å…ˆç´¢å¼•'
                },
                {
                    name: 'é¡µé¢æ ‡é¢˜å”¯ä¸€æ€§',
                    check: () => {
                        const title = document.title;
                        return title && title.length > 10 && title.length < 60;
                    },
                    description: 'æ¯ä¸ªé¡µé¢åº”æœ‰ç‹¬ç‰¹ä¸”åˆé€‚é•¿åº¦çš„æ ‡é¢˜'
                }
            ];

            let passCount = 0;
            let totalCount = checks.length;
            let resultsHTML = '<h2>æ£€æŸ¥ç»“æœ</h2>';

            for (const checkItem of checks) {
                let passed = false;
                try {
                    passed = await checkItem.check();
                } catch (error) {
                    console.error('Check failed:', error);
                }
                
                if (passed) passCount++;
                
                const status = passed ? 'pass' : 'fail';
                const icon = passed ? 'âœ“' : 'âœ—';
                
                resultsHTML += `
                    <div class="check-item ${status}">
                        <div class="status">${icon}</div>
                        <div>
                            <strong>${checkItem.name}</strong><br>
                            <small>${checkItem.description}</small>
                        </div>
                    </div>
                `;
            }

            const score = Math.round((passCount / totalCount) * 100);
            let scoreClass = 'warning';
            if (score >= 80) scoreClass = 'pass';
            else if (score < 50) scoreClass = 'fail';

            resultsHTML = `
                <div class="check-item ${scoreClass}">
                    <div class="status">${score}%</div>
                    <div>
                        <strong>æ€»ä½“è¯„åˆ†ï¼š${score}%</strong><br>
                        <small>é€šè¿‡äº† ${passCount}/${totalCount} é¡¹æ£€æŸ¥</small>
                    </div>
                </div>
            ` + resultsHTML;

            if (score >= 80) {
                resultsHTML += `
                    <div class="check-item pass">
                        <div class="status">ğŸ‰</div>
                        <div>
                            <strong>æ­å–œï¼æ‚¨çš„ç½‘ç«™å·²å‡†å¤‡å¥½è¢« Google ç´¢å¼•</strong><br>
                            <small>å¯ä»¥å¼€å§‹æäº¤åˆ° Google Search Console äº†</small>
                        </div>
                    </div>
                `;
            } else {
                resultsHTML += `
                    <div class="check-item warning">
                        <div class="status">âš ï¸</div>
                        <div>
                            <strong>éœ€è¦ä¸€äº›æ”¹è¿›æ‰èƒ½æ›´å¥½åœ°è¢« Google ç´¢å¼•</strong><br>
                            <small>è¯·ä¿®å¤å¤±è´¥çš„æ£€æŸ¥é¡¹ç›®</small>
                        </div>
                    </div>
                `;
            }

            results.innerHTML = resultsHTML;
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡Œæ£€æŸ¥
        window.addEventListener('load', () => {
            setTimeout(runChecks, 1000);
        });
    </script>
</body>
</html> 